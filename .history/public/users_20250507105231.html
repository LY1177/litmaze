<!-- public/users.html -->
<!DOCTYPE html>
<html lang="bg">
<head><meta charset="UTF-8"><title>Потребители (Live)</title></head>
<body>
  <h2>Регистрирани потребители (авто-6sec)</h2>
  <table id="users-table" border="1" cellpadding="5">
    <tr><th>ID</th><th>Потребител</th><th>Email</th><th>Парола (bcrypt)</th></tr>
  </table>
  <script>
    async function loadUsers() {
      const res = await fetch('/admin/table?key=demo123');
      const html = await res.text();
      // Извличаме само <tr>…</tr> редовете с regex
      const rows = html.match(/<tr>[\s\S]*?<\/tr>/g).slice(1);
      document.getElementById('users-table').innerHTML = '<tr><th>ID</th><th>Потребител</th><th>Email</th><th>Парола</th></tr>' + rows.join('');
    }
    loadUsers();
    setInterval(loadUsers, 6000); // всяка 6 секунди
  </script>
</body>
</html>
